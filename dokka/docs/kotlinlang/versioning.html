<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <meta charset="UTF-8">   <meta name="built-on" content="${builtOn}">   <title>Versioning pluginâ€”Dokka</title><script id="virtual-toc-data" type="application/json">[{"id":"applying-the-plugin","level":0,"title":"Applying the plugin","anchor":"#applying-the-plugin"},{"id":"configuration","level":0,"title":"Configuration","anchor":"#configuration"},{"id":"generating-versioned-documentation","level":0,"title":"Generating versioned documentation","anchor":"#generating-versioned-documentation"},{"id":"usage-example","level":0,"title":"Usage example","anchor":"#usage-example"}]</script>     <link href="docs/app/app.css%3F_ijt=rqsuqnf4hg3fhbkaeass0baidf.css" rel="stylesheet">   <link rel="shortcut icon" href="https://resources.jetbrains.com/storage/ui/favicons/favicon.ico" type="image/x-icon" sizes="16x16 32x32"/><link rel="apple-touch-icon" sizes="57x57" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="https://resources.jetbrains.com/storage/ui/favicons/apple-touch-icon-180x180.png"/><link rel="mask-icon" href="https://resources.jetbrains.com/storage/ui/favicons/apple-mask-icon.svg" color="black"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content="${ogMetaImage}"><!-- Open Graph --><meta property="og:title" content="Versioning plugin - Help | Dokka"/><meta property="og:description" content=""/><meta property="og:image" content="${ogMetaImage}"/><meta property="og:site_name" content="Dokka Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="${ogUrl}"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="${ogTwitter}"><meta name="twitter:title" content="Versioning plugin - Help | Dokka"><meta name="twitter:description" content=""><meta name="twitter:creator" content="${ogTwitter}"><meta name="twitter:image:src" content="${ogMetaImage}"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "${ogUrl}#webpage", "url": "${ogUrl}", "name": "Versioning plugin - Help | Dokka", "description": "", "image": "${ogMetaImage}", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "${ogUrlRoot}#website", "url": "${ogUrlRoot}", "name": "Dokka Help" }</script><!-- End Schema.org --></head>    <body data-id="versioning" data-main-title="Versioning plugin" data-article-props="{&quot;microFormat&quot;:[],&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs=""  >  <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Dokka 1.7.20 Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select class="select _shortcuts" height="1" id="switch-shortcuts">      </select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="versioning" id="versioning.md"  >Versioning plugin</h1><p id="e757a9" >Versioning plugin aims to provide the ability to host documentation for multiple versions of your library/application with seamless switching between them. This, in turn, provides better experience for your users.</p> <p id="e757b1" ><figure  class=" " id="e757b9"><img alt="Screenshot of documentation version dropdown" title="Screenshot of documentation version dropdown" src="docs/versioning-plugin-example.png%3F_ijt=rqsuqnf4hg3fhbkaeass0baidf" id="e757b9" class="  "  width="663" height="350" /></figure></p> <aside data-type="note" class="prompt" data-title="" id="e757c5" ><p id="e757ce" >Versioning plugin only works with <a href="html.html" id="e757d6"  >HTML</a> format.</p></aside> <p id="e757e0" >Visit <a href="https://github.com/Kotlin/dokka/tree/1.7.20/examples/gradle/dokka-versioning-multimodule-example" data-external="true" id="e757e8" rel="noopener noreferrer" >versioning plugin example project</a> to see it in action as well as how it can be configured.</p> <section class="chapter" >  <h2 id="applying-the-plugin" data-toc="versioning#applying-the-plugin" >Applying the plugin</h2><p id="e757fb" >You can apply the versioning plugin the same way as other <a href="plugins_introduction.html#applying-dokka-plugins" id="e75803"  >Dokka plugins</a>:</p> <div class="tabs" id="e7580d"  data-group="build-script"><div class="tabs__content" data-sync-tabs="kotlin" id="e75816" data-title="Kotlin" ><div class="code-block" data-lang="kotlin" id="e75828"       >  dependencies {
    dokkaHtmlPlugin(&quot;org.jetbrains.dokka:versioning-plugin:%dokkaVersion%&quot;)
}
  </div> <aside data-type="note" class="prompt" data-title="" id="e75831" ><p id="e7583a" >When documenting <a href="gradle.html#multi-project-builds" id="e75842"  >multi-project</a> builds, you need to apply versioning plugin in subprojects as well as in their parent project.</p></aside></div><div class="tabs__content" data-sync-tabs="groovy" id="e7584c" data-title="Groovy" ><div class="code-block" data-lang="groovy" id="e7585e"       >  dependencies {
    dokkaHtmlPlugin 'org.jetbrains.dokka:versioning-plugin:%dokkaVersion%'
}
  </div> <aside data-type="note" class="prompt" data-title="" id="e75867" ><p id="e75870" >When documenting <a href="gradle.html#multi-project-builds" id="e75878"  >multi-project</a> builds, you need to apply versioning plugin in subprojects as well as in their parent project.</p></aside></div><div class="tabs__content" data-sync-tabs="mvn" id="e75882" data-title="Maven" ><div class="code-block" data-lang="markup" id="e75894"       >  &lt;plugin&gt;
    &lt;groupId&gt;org.jetbrains.dokka&lt;/groupId&gt;
    &lt;artifactId&gt;dokka-maven-plugin&lt;/artifactId&gt;
    ...
    &lt;configuration&gt;
        &lt;dokkaPlugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.jetbrains.dokka&lt;/groupId&gt;
                &lt;artifactId&gt;versioning-plugin&lt;/artifactId&gt;
                &lt;version&gt;%dokkaVersion%&lt;/version&gt;
            &lt;/plugin&gt;
        &lt;/dokkaPlugins&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
  </div></div><div class="tabs__content" data-sync-tabs="cli" id="e7589d" data-title="CLI" ><p id="e758a7" >You can find versioning plugin's artifact on <a href="https://mvnrepository.com/artifact/org.jetbrains.dokka/versioning-plugin/1.7.20" data-external="true" id="e758af" rel="noopener noreferrer" >mvnrepository</a> or by browsing <a href="https://repo1.maven.org/maven2/org/jetbrains/dokka/versioning-plugin/1.7.20/" data-external="true" id="e758b9" rel="noopener noreferrer" >maven central repository</a> directly, and pass it to <code class="code " id="e758c3"  >pliginsClasspath</code>.</p> <p id="e758cb" >Via <a href="cli.html#running-with-command-line-arguments" id="e758d3"  >command line arguments</a>:</p> <div class="code-block" data-lang="bash" id="e758e5"       >  java -jar dokka-cli-%dokkaVersion%.jar \
     -pluginsClasspath &quot;./dokka-base-%dokkaVersion%.jar;...;./versioning-plugin-%dokkaVersion%.jar&quot; \
     ...
  </div> <p id="e758ee" >Via <a href="cli.html#running-with-json-configuration" id="e758f6"  >JSON configuration</a>:</p> <div class="code-block" data-lang="json" id="e75908"       >  {
  ...
  &quot;pluginsClasspath&quot;: [
    &quot;./dokka-base-%dokkaVersion%.jar&quot;,
    &quot;...&quot;,
    &quot;./versioning-plugin-%dokkaVersion%.jar&quot;
  ],
  ...
}
  </div></div></div>  </section><section class="chapter" >  <h2 id="configuration" data-toc="versioning#configuration" >Configuration</h2><section class="chapter" >  <h3 id="configuration-options" data-toc="versioning#configuration-options" >Configuration options</h3><p id="e75923" >Versioning plugin has a number of optional configuration properties:</p> <div class="table-wrapper">      <table class=" wide" id="e7592b" >  <thead>  <tr class="ijRowHead" id="e7593b" >      <th id="e75943"    ><b id="e7594b" class=""  >Property</b></th>      <th id="e75953"    ><b id="e7595b" class=""  >Description</b></th></tr></thead>  <tbody>  <tr class="" id="e7596b" >      <td id="e75973"    ><code class="code " id="e7597b"  >version</code></td>      <td id="e75983"    >Version of your application/library for which documentation is going to be generated. This will be the version in the dropdown menu.</td></tr> <tr class="" id="e7598b" >      <td id="e75993"    ><code class="code " id="e7599b"  >versionsOrdering</code></td>      <td id="e759a3"    >Optional list of strings that represents the order in which versions should appear in the dropdown menu. Must match versions string exactly. First item of the list is the topmost in the dropdown.</td></tr> <tr class="" id="e759ab" >      <td id="e759b3"    ><code class="code " id="e759bb"  >olderVersionsDir</code></td>      <td id="e759c3"    >Optional path to a parent folder that contains other documentation versions. Requires a certain <a href="versioning.html#directory-structure" id="e759cb"  >directory structure</a>.</td></tr> <tr class="" id="e759d5" >      <td id="e759dd"    ><code class="code " id="e759e5"  >olderVersions</code></td>      <td id="e759ed"    >Optional list of paths to other documentation versions. Must point to Dokka's outputs directly. Useful if different versions are scattered and cannot be put into a single directory.</td></tr> <tr class="" id="e759f5" >      <td id="e759fd"    ><code class="code " id="e75a05"  >renderVersionsNavigationOnAllPages</code></td>      <td id="e75a0d"    >Optional boolean indicating whether to render navigation dropdown on all pages. True by default.</td></tr></tbody></table></div> <section class="chapter" >  <h4 id="directory-structure" data-toc="versioning#directory-structure" >Directory structure</h4><p id="e75a1e" >Note that the directory passed to <code class="code " id="e75a26"  >olderVersionsDir</code> requires a specific structure:</p> <div class="code-block" data-lang="none" id="e75a36"      data-disable-link-processing="true" >  .
&#9492;&#9472;&#9472; olderVersionsDir
    &#9492;&#9472;&#9472; 1.7.10
        &#9500;&#9472;&#9472; &lt;dokka output&gt;
    &#9492;&#9472;&#9472; 1.7.20
        &#9500;&#9472;&#9472; &lt;dokka output&gt;
...
  </div>  </section>  </section><section class="chapter" >  <h3 id="configuration-example" data-toc="versioning#configuration-example" >Configuration example</h3><div class="tabs" id="e75a48"  data-group="build-script"><div class="tabs__content" data-sync-tabs="kotlin" id="e75a51" data-title="Kotlin" ><div class="code-block" data-lang="kotlin" id="e75a63"       >  import org.jetbrains.dokka.versioning.VersioningPlugin
import org.jetbrains.dokka.versioning.VersioningConfiguration

buildscript {
    dependencies {
        classpath(&quot;org.jetbrains.dokka:versioning-plugin:%dokkaVersion%&quot;)
    }
}

tasks.dokkaHtml {
    pluginConfiguration&lt;VersioningPlugin, VersioningConfiguration&gt; {
        version = &quot;1.5&quot;
        versionsOrdering = listOf(&quot;1.5&quot;, &quot;1.4&quot;, &quot;1.3&quot;, &quot;1.2&quot;, &quot;1.1&quot;, &quot;alpha-2&quot;, &quot;alpha-1&quot;)
        olderVersionsDir = file(&quot;documentation/version&quot;)
        olderVersions = listOf(file(&quot;documentation/alpha/alpha-2&quot;), file(&quot;documentation/alpha/alpha-1&quot;))
        renderVersionsNavigationOnAllPages = true
    }
}
  </div> <p id="e75a6c" >Alternatively, you can configure it via JSON:</p> <div class="code-block" data-lang="kotlin" id="e75a7c"       >      val versioningConfiguration = &quot;&quot;&quot;
    {
      &quot;version&quot;: &quot;1.5&quot;,
      &quot;versionsOrdering&quot;: [&quot;1.5&quot;, &quot;1.4&quot;, &quot;1.3&quot;, &quot;1.2&quot;, &quot;1.1&quot;, &quot;alpha-2&quot;, &quot;alpha-1&quot;],
      &quot;olderVersionsDir&quot;: &quot;documentation/version&quot;,
      &quot;olderVersions&quot;: [&quot;documentation/alpha/alpha-2&quot;, &quot;documentation/alpha/alpha-1&quot;],
      &quot;renderVersionsNavigationOnAllPages&quot;: true
    }
    &quot;&quot;&quot;
    pluginsMapConfiguration.set(
        mapOf(
            &quot;org.jetbrains.dokka.versioning.VersioningPlugin&quot; to versioningConfiguration
        )
    )
  </div></div><div class="tabs__content" data-sync-tabs="groovy" id="e75a85" data-title="Groovy" ><div class="code-block" data-lang="groovy" id="e75a97"       >  dokkaHtml {
    String versioningConfiguration = &quot;&quot;&quot;
    {
      &quot;version&quot;: &quot;1.5&quot;,
      &quot;versionsOrdering&quot;: [&quot;1.5&quot;, &quot;1.4&quot;, &quot;1.3&quot;, &quot;1.2&quot;, &quot;1.1&quot;, &quot;alpha-2&quot;, &quot;alpha-1&quot;],
      &quot;olderVersionsDir&quot;: &quot;documentation/version&quot;,
      &quot;olderVersions&quot;: [&quot;documentation/alpha/alpha-2&quot;, &quot;documentation/alpha/alpha-1&quot;],
      &quot;renderVersionsNavigationOnAllPages&quot;: true
    }
    &quot;&quot;&quot;
    pluginsMapConfiguration.set(
            [&quot;org.jetbrains.dokka.versioning.VersioningPlugin&quot;: versioningConfiguration]
    )
}
  </div></div><div class="tabs__content" data-sync-tabs="mvn" id="e75aa0" data-title="Maven" ><div class="code-block" data-lang="markup" id="e75ab2"       >  &lt;plugin&gt;
    &lt;groupId&gt;org.jetbrains.dokka&lt;/groupId&gt;
    &lt;artifactId&gt;dokka-maven-plugin&lt;/artifactId&gt;
    ...
    &lt;configuration&gt;
        &lt;pluginsConfiguration&gt;
            &lt;org.jetbrains.dokka.versioning.VersioningPlugin&gt;
                &lt;version&gt;1.5&lt;/version&gt;
                &lt;versionsOrdering&gt;
                    &lt;version&gt;1.5&lt;/version&gt;
                    &lt;version&gt;1.4&lt;/version&gt;
                    &lt;version&gt;1.3&lt;/version&gt;
                    &lt;version&gt;1.2&lt;/version&gt;
                    &lt;version&gt;1.1&lt;/version&gt;
                    &lt;version&gt;alpha-2&lt;/version&gt;
                    &lt;version&gt;alpha-1&lt;/version&gt;
                &lt;/versionsOrdering&gt;
                &lt;olderVersionsDir&gt;${project.basedir}/documentation/version&lt;/olderVersionsDir&gt;
                &lt;olderVersions&gt;
                    &lt;version&gt;${project.basedir}/documentation/alpha/alpha-2&lt;/version&gt;
                    &lt;version&gt;${project.basedir}/documentation/alpha/alpha-1&lt;/version&gt;
                &lt;/olderVersions&gt;
                &lt;renderVersionsNavigationOnAllPages&gt;true&lt;/renderVersionsNavigationOnAllPages&gt;
            &lt;/org.jetbrains.dokka.versioning.VersioningPlugin&gt;
        &lt;/pluginsConfiguration&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
  </div></div><div class="tabs__content" data-sync-tabs="cli" id="e75abb" data-title="CLI" ><div class="code-block" data-lang="bash" id="e75acd"       >  java -jar dokka-cli-%dokkaVersion%.jar \
     ...
     -pluginsConfiguration &quot;org.jetbrains.dokka.versioning.VersioningPlugin={\&quot;version\&quot;: \&quot;1.5\&quot;, \&quot;versionsOrdering\&quot;: [\&quot;1.5\&quot;, \&quot;1.4\&quot;, \&quot;1.3\&quot;, \&quot;1.2\&quot;, \&quot;1.1\&quot;, \&quot;alpha-2\&quot;, \&quot;alpha-1\&quot;], \&quot;olderVersionsDir\&quot;: \&quot;documentation/version\&quot;, \&quot;olderVersions\&quot;: [\&quot;documentation/alpha/alpha-2\&quot;, \&quot;documentation/alpha/alpha-1\&quot;], \&quot;renderVersionsNavigationOnAllPages\&quot;: true}&quot;

  </div> <p id="e75ad6" >Alternatively, via JSON configuration:</p> <div class="code-block" data-lang="json" id="e75ae6"       >  {
  &quot;moduleName&quot;: &quot;Dokka Example&quot;,
  ...
  &quot;pluginsConfiguration&quot;: [
    {
      &quot;fqPluginName&quot;: &quot;org.jetbrains.dokka.versioning.VersioningPlugin&quot;,
      &quot;serializationFormat&quot;: &quot;JSON&quot;,
      &quot;values&quot;: &quot;{\&quot;version\&quot;: \&quot;1.5\&quot;, \&quot;versionsOrdering\&quot;: [\&quot;1.5\&quot;, \&quot;1.4\&quot;, \&quot;1.3\&quot;, \&quot;1.2\&quot;, \&quot;1.1\&quot;, \&quot;alpha-2\&quot;, \&quot;alpha-1\&quot;], \&quot;olderVersionsDir\&quot;: \&quot;documentation/version\&quot;, \&quot;olderVersions\&quot;: [\&quot;documentation/alpha/alpha-2\&quot;, \&quot;documentation/alpha/alpha-1\&quot;], \&quot;renderVersionsNavigationOnAllPages\&quot;: true}&quot;
    }
  ]
}
  </div></div></div>  </section>  </section><section class="chapter" >  <h2 id="generating-versioned-documentation" data-toc="versioning#generating-versioned-documentation" >Generating versioned documentation</h2><p id="e75af8" >With versioning plugin applied and configured, no other steps are needed: documentation can be built the usual way.</p> <p id="e75b00" >Among other things, versioning plugin will add a <code class="code " id="e75b08"  >version.json</code> file to the output folder. This file will be used by the plugin to match versions and generate version navigation. If your previously generated documentation does not have that file, you will need to re-generate documentation for such versions -- adding just the file will not work.</p> <p id="e75b10" >Versioning plugin will also bundle all other documentation versions that have been passed through <code class="code " id="e75b18"  >olderVersionsDir</code> and <code class="code " id="e75b20"  >olderVersions</code> configuration properties by putting them inside <code class="code " id="e75b28"  >older</code> directory.</p>  </section><section class="chapter" >  <h2 id="usage-example" data-toc="versioning#usage-example" >Usage example</h2><p id="e75b39" >There is no single correct way to configure the plugin, it can be tailored to your liking and needs. However, it can be a bit overwhelming when starting out. Below you will find one of the ways it can be configured so that you can begin publishing versioned documentation right away.</p> <p id="e75b41" >The main idea behind it is the following:</p> <ol class="list _decimal" id="e75b49"   ><li class="list__item" id="e75b51" ><p>One directory will contain all versions of your documentation. For instance, <code class="code " id="e75b59"  >documentation/version/{doc_version}</code>. This is your archive, you will need to preserve it for future builds.</p></li> <li class="list__item" id="e75b61" ><p>Output directory of all new builds will be set to that directory as well, under <code class="code " id="e75b69"  >documentation/version/{new_version}</code></p></li> <li class="list__item" id="e75b71" ><p>When new builds are executed, the plugin will look for previous versions of documentation in the archive directory.</p></li> <li class="list__item" id="e75b79" ><p>Once new documentation has been generated, it needs to be <b id="e75b81" class=""  >copied</b> to some place accessible by the user: GitHub pages, nginx static directories, and so on. It needs to be copied and not moved because Dokka will still need this version for future builds, otherwise there will be a gap in the archive.</p></li> <li class="list__item" id="e75b89" ><p>Once it has been safely copied away, you can remove <code class="code " id="e75b91"  >older</code> directory from the newly generated and archived version. This helps reduce the overhead of each version bundling all previous versions, as these files are effectively duplicates.</p></li></ol> <div class="code-block" data-lang="kotlin" id="e75ba1"       >  import org.jetbrains.dokka.versioning.VersioningPlugin
import org.jetbrains.dokka.versioning.VersioningConfiguration

buildscript {
    dependencies {
        classpath(&quot;org.jetbrains.dokka:versioning-plugin:%dokkaVersion%&quot;)
    }
}

dependencies {
    dokkaPlugin(&quot;org.jetbrains.dokka:versioning-plugin:$dokkaVersion&quot;)
}

tasks.dokkaHtml {
    // can be any persistent folder where
    // you store documentation by version
    val docVersionsDir = projectDir.resolve(&quot;documentation/version&quot;)

    // version for which you are currently generating docs
    val currentVersion = &quot;1.3&quot;
    
    // set output to folder with all other versions
    // as you'll need current version for future builds
    val currentDocsDir = docVersionsDir.resolve(currentVersion)
    outputDirectory.set(currentDocsDir)

    pluginConfiguration&lt;VersioningPlugin, VersioningConfiguration&gt; {
        olderVersionsDir = docVersionsDir
        version = currentVersion
    }

    doLast {
        // this folder will contain latest documentation with all
        // previous versions included, so it's ready to be published.
        // make sure it's copied and not moved - you'll still need this
        // version for future builds
        currentDocsDir.copyTo(file(&quot;/my/hosting&quot;))
       
        // only once current documentation has been safely moved,
        // remove previous versions bundled in it. They will not
        // be needed in future builds, it's just overhead
        currentDocsDir.resolve(&quot;older&quot;).deleteRecursively()
    }
}
  </div>  </section><div class="last-modified"> Last modified: 16 November 2022</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">   </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="docs/app/app.js%3F_ijt=rqsuqnf4hg3fhbkaeass0baidf"></script></body></html>